func getInputByte():word{
    asm{
        "lda #%10000001     ; Set NMI enable bit and joypad"
         "sta $4200"
         "WaitForInput:"
         "lda $4212"
         "and #1"
         "bne WaitForInput   ;Wait for input unless we have the input"
         "lda $4219          ;Load input into the accumulator then return (compiler adds it)"
    }
}

func frame(){
    asm{"wai"}  //Wait for VBlank, then return
}

playerXPosition: word = 64

func main(){
    playing: bool = true

    while playing do{
        inputByte: word = getInputByte()
        if (inputByte and 4) > 0 then playing = false
        else{
            if (inputByte and 1) > 0 then
                playerXPosition = playerXPosition + 1
            else if (inputByte and 2) > 0 then
                playerXPosition = playerXPosition - 1
        }
        frame()
    }
    asm{"stp    ;stop the processor from running"}
}